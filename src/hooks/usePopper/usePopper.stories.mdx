import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { RefDiv, RefSection } from '../../../.storybook/helpers'
import { scrollDecorator } from '../../../.storybook/decorators'
import { Fragment, useContext, useState, useRef } from 'react'
import { RefButton } from '../../components/Button'
import { Text } from '../../components/Text'
import { Float } from '../../components/Float'
import { usePopper } from '.'
import { usePopper as usePopperBase } from 'react-popper'

<Meta title="Hooks|Popper" />

# Popper
A hook for positioning an element in context with another element, uses [Popper.js](https://popper.js.org/) as the positioning engine.

## Base
The hook in its simplest form. Alignment is set to `Auto` by default.

<Preview>
  <Story name="Base">
    {() => {
      const triggerRef = useRef()
      const targetRef = useRef()
      const [styles, attributes] = usePopper({ triggerRef, targetRef })
      return (
        <div className="p--xxl">
          <RefButton ref={triggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={targetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align auto
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

<Preview>
  <Story name="BaseState">
    {() => {
      const [triggerRef, setTriggerRef] = useState(null)
      const [targetRef, setTargetRef] = useState(null)
      const [styles, attributes] = usePopper({ triggerRef, targetRef })
      return (
        <div className="p--xxl">
          <RefButton ref={setTriggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTargetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align auto
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>


## Alignment
Pass a value to the `align` option and you'll see the desired alignment rendered.

### Left
<Preview>
  <Story name="Align-Left">
    {() => {
      const triggerRef = useRef()
      const targetRef = useRef()
      const [styles, attributes] = usePopper({ align: 'Left', triggerRef, targetRef })
      return (
        <div className="p--xxl" style={{ marginLeft: '300px' }}>
          <RefButton ref={triggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={targetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align left
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Right
<Preview>
  <Story name="Align-Right">
    {() => {
      const triggerRef = useRef()
      const targetRef = useRef()
      const [styles, attributes] = usePopper({ align: 'Right', triggerRef, targetRef })
      return (
        <div className="p--xxl">
          <RefButton ref={triggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={targetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align right
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Top
<Preview>
  <Story name="Align-Top">
    {() => {
      const triggerRef = useRef()
      const targetRef = useRef()
      const [styles, attributes] = usePopper({ align: 'Top', triggerRef, targetRef})
      return (
        <div className="p--xxl">
          <RefButton ref={triggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={targetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align top
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Bottom
<Preview>
  <Story name="Align-Bottom">
    {() => {
      const triggerRef = useRef()
      const targetRef = useRef()
      const [styles, attributes] = usePopper({ align: 'Bottom', triggerRef, targetRef})
      return (
        <div className="p--xxl">
          <RefButton ref={triggerRef} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={targetRef} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align bottom
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>
