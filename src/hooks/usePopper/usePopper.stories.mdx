import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { RefDiv, RefSection } from '../../../.storybook/helpers'
import { scrollDecorator } from '../../../.storybook/decorators'
import { Fragment, useContext, useState, useRef } from 'react'
import { RefButton } from '../../components/Button'
import { Text } from '../../components/Text'
import { Float } from '../../components/Float'
import { usePopper } from '.'
import { usePopper as usePopperBase } from 'react-popper'

<Meta title="Hooks|Popper" />

# Popper
A hook for positioning an element in context with another element, uses [Popper.js](https://popper.js.org/) as the positioning engine.

## Base
The hook in its simplest form. Alignment is set to `Auto` by default.

<Preview>
  <Story name="Base">
    {() => {
      const [trigger, setTrigger] = useState(null)
      const [target, setTarget] = useState(null)
      const [styles, attributes] = usePopper({ align: 'Top', trigger, target})
      return (
        <div className="p--xxl">
          <RefButton ref={setTrigger} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTarget} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align Top
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>


## Alignment
Pass a value to the `align` option and you'll see the desired alignment rendered.

### Left
<Preview>
  <Story name="Align-Left">
    {() => {
      const [trigger, setTrigger] = useState(null)
      const [target, setTarget] = useState(null)
      const [styles, attributes] = usePopper({ align: 'Left', trigger, target})
      return (
        <div className="p--xxl">
          <RefButton ref={setTrigger} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTarget} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align Left
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Right
<Preview>
  <Story name="Align-Right">
    {() => {
      const [trigger, setTrigger] = useState(null)
      const [target, setTarget] = useState(null)
      const [styles, attributes] = usePopper({ align: 'Right', trigger, target})
      return (
        <div className="p--xxl">
          <RefButton ref={setTrigger} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTarget} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align Right
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Top
<Preview>
  <Story name="Align-Top">
    {() => {
      const [trigger, setTrigger] = useState(null)
      const [target, setTarget] = useState(null)
      const [styles, attributes] = usePopper({ align: 'Top', trigger, target})
      return (
        <div className="p--xxl">
          <RefButton ref={setTrigger} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTarget} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align Top
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>

### Bottom
<Preview>
  <Story name="Align-Bottom">
    {() => {
      const [trigger, setTrigger] = useState(null)
      const [target, setTarget] = useState(null)
      const [styles, attributes] = usePopper({ align: 'Bottom', trigger, target})
      return (
        <div className="p--xxl">
          <RefButton ref={setTrigger} size="Small">
            Reference element
          </RefButton>
          <RefDiv ref={setTarget} className="p--md bg--ui-one" style={styles.popper} {...attributes.popper}>
            Align bottom
          </RefDiv>
        </div>
      )
    }}
  </Story>
</Preview>
