import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { Fragment, useContext, useState } from 'react'
import { Button } from '../../components/Button'
import { ToggleTreeContext, ToggleTree } from '.'

<Meta title='Context|Toggle Tree' component={ToggleTree} />

# Toggle Tree
This is the Context implementation of the [Toggle Tree hook](/?path=/docs/hooks-toggle-group--base).

## Base
You can use `useContext` to access the toggle state.

<Preview>
  <Story name='Base'>
    {() => {
      const App = () => {
        const { toggles, setToggled } = useContext(ToggleTreeContext)
        return (
          <ul>
            <li>
              <Text>Depth: 0</Text>
              <Button size='Small' onClick={() => setToggled('one')}>{toggles.one?.open ? 'Untoggle' : 'Toggle me!'}</Button>
              {toggles.one?.open && (
                <Text>You found me!</Text>
              )}
            </li>
            <li>
              <Text>Depth: 0</Text>
              <Button size='Small' onClick={() => setToggled('two')}>{toggles.two?.open ? 'Untoggle' : 'Toggle me!'}</Button>
              {toggles.two?.open && (
                <ul>
                  <li>
                    <Text>Depth: 1</Text>
                    <Button size='Small' onClick={() => setToggled('three', 1)}>{toggles.three?.open ? 'Untoggle' : 'Toggle me!'}</Button>
                    {toggles.three?.open && (
                      <ul>
                        <li>
                          <Text>Depth: 2</Text>
                          <Button size='Small' onClick={() => setToggled('four', 2)}>{toggles.four?.open ? 'Untoggle' : 'Toggle me!'}</Button>
                          {toggles.four?.open && (
                            <Text>You found me!</Text>
                          )}
                        </li>
                        <li>
                          <Text>Depth: 2</Text>
                          <Button size='Small' onClick={() => setToggled('five', 2)}>{toggles.five?.open ? 'Untoggle' : 'Toggle me!'}</Button>
                          {toggles.five?.open && (
                            <Text>You found me!</Text>
                          )}
                        </li>
                      </ul>
                    )}
                  </li>
                  <li>
                    <Text>Depth: 1</Text>
                    <Button size='Small' onClick={() => setToggled('six', 1)}>{toggles.six?.open ? 'Untoggle' : 'Toggle me!'}</Button>
                    {toggles.six?.open && (
                      <Text>You found me!</Text>
                    )}
                  </li>
                </ul>
              )}
            </li>
          </ul>
        )
      }
      return (
        <ToggleTree>
          <App />
        </ToggleTree>
      )
    }}
  </Story>
</Preview>