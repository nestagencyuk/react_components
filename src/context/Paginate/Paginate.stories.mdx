import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { Fragment, useContext, useState } from 'react'
import { Button } from '../../components/Button'
import { PaginateContext, Paginate } from '.'

<Meta title='Interaction|Paginate' component={Paginate} />

# Paginate
Paginate provides a generic way to show a section of an array, useful for creating components such as paged tables or image sliders.
 
## Base
The most concise way of accessing the pagination state is to use Render Props (i.e a function as a child).

<Preview>
  <Story name='Base'>
    <Paginate limit={1}>
      {({ items = [], current, setCurrent }) => (
        <Fragment>
          <div>Current: {current}</div>
          {items.includes(0) && <div>Item 0</div>}
          {items.includes(1) && <div>Item 1</div>}
          {items.includes(2) && <div>Item 2</div>}
          {items.includes(3) && <div>Item 3</div>}
          {items.includes(4) && <div>Item 4</div>}
          {items.includes(5) && <div>Item 5</div>}
          {items.includes(6) && <div>Item 6</div>}
          {items.includes(7) && <div>Item 7</div>}
          <Button type='Primary' disabled={current === 0} onClick={() => setCurrent(current - 1 < 0 ? 0 : current - 1)}>Prev</Button>
          <Button type='Primary' disabled={current === 6} onClick={() => setCurrent(current + 1 > 6 ? 6 : current + 1)}>Next</Button>
        </Fragment>
      )}
    </Paginate>
  </Story>
</Preview>

## Infinite
The most concise way of accessing the pagination state is to use Render Props (i.e a function as a child).

<Preview>
  <Story name='Infinite'>
    <Paginate limit={1}>
      {({ items = [], current, setCurrent }) => (
        <Fragment>
          <div>Current: {current}</div>
          {items.includes(0) && <div>Item 0</div>}
          {items.includes(1) && <div>Item 1</div>}
          {items.includes(2) && <div>Item 2</div>}
          {items.includes(3) && <div>Item 3</div>}
          {items.includes(4) && <div>Item 4</div>}
          {items.includes(5) && <div>Item 5</div>}
          {items.includes(6) && <div>Item 6</div>}
          <Button type='Primary' onClick={() => setCurrent(current - 1 < 0 ? 6 : current - 1)}>Prev</Button>
          <Button type='Primary' onClick={() => setCurrent(current + 1 > 6 ? 0 : current + 1)}>Next</Button>
        </Fragment>
      )}
    </Paginate>
  </Story>
</Preview>

<!-- 
## Context
Alternatively, you can use `useContext` to access the toggle state.

<Preview>
  <Story name='Context'>
    {() => {
      const App = () => {
        const { toggled, setPaginated } = useContext(PaginateContext)
        return (
          <Button type={'Primary'} onClick={() => setPaginated(!toggled)}>{toggled ? 'Untoggle' : 'Paginate me!'}</Button>
        )
      }
      return (
        <Paginate>
          <App />
        </Paginate>
      )
    }}
  </Story>
</Preview> -->