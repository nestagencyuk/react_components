import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { Fragment, useContext, useState } from 'react'
import { useStateMachine } from '../../hooks/useStateMachine'
import { Text } from '../Text'
import { Button } from '../Button'
import { Overlay } from '../Overlay'
import { Float } from '../Float'
import { Modal } from '.'

<Meta title="Components|Base/Modal" component={Modal} />

# Modal
A modal component that is displayed over all other elements on the page and renders any optional combination of a heading, body text or footer.

## Base
This is the modal using all optional props.

<Preview>
  <Story name="Base">
    <Modal 
      header={{ heading: 'Heading', subheading: 'Subheading'}} 
      footer={{ 
        actions: [
          { text: 'Close', variant: 'Tertiary', size: 'Small' },
          { text: 'OK', variant: 'Primary', size: 'Small' },
        ]
      }}>
      <Text>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
      </Text>
    </Modal>
  </Story>
</Preview>

## Toggle
Use state to show/hide the modal as needed.

<Preview>
  <Story name="Toggle">
    {() => {
      const [state, dispatchEvent] = useStateMachine()
      return (
        <Fragment>
          <Button onClick={() => dispatchEvent('OPEN')}>Open Modal</Button>
          {state !== 'Closed' && <Float portal align={{ x: 'Center', y: 'Center' }}>
            <Overlay state={state} portal fixed onClick={() => dispatchEvent('CLOSE')} /> 
            <Modal 
              state={state}
              header={{ heading: 'Heading', subheading: 'Subheading'}} 
              footer={{ 
                actions: [
                  { text: 'Close', variant: 'Tertiary', size: 'Small', onClick: () => dispatchEvent('CLOSE') },
                  { text: 'OK', variant: 'Primary', size: 'Small', onClick: () => dispatchEvent('CLOSE') },
                ]
              }}
              onClose={() => dispatchEvent('CLOSE')}>
              <Text>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
              </Text>
            </Modal>
          </Float>}
        </Fragment>
      )
    }}
  </Story>
</Preview>

## Prop Types
<Props of={Modal} />