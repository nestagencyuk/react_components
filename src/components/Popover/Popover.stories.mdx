import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { minHeightDecorator } from '../../../.storybook/decorators'
import { RefDiv } from '../../../.storybook/helpers'
import { useState, useRef, useEffect, Fragment } from 'react'
import { RefButton, Button } from '../Button'
import { Text } from '../Text'
import { Popover } from '.'

<Meta title="Components/Base|Popover" component={Popover} />

# Popover
A simple Popover. Similar to tooltip but fires `onClick` instead and persists with focus. It's more appropriate for displaying interactive content, like context menus.

## Base
This is the popover in its simplest form. If the passed children is not a function, it will be wrapped with a span with the appropriate events.

<Preview>
  <Story name="Base">
    <Popover render={<div className="p--sm">I am a Popover!</div>}>
      Click me!
    </Popover>
  </Story>
</Preview>

## Render Props
This is the function child implementation if you want more control over what triggers the popover. The function returns a `value` that has a `ref` and methods `onFocus` and `onBlur` that will need to be attached to your desired element. This is also useful if you wish to trigger the focus using a different event, such as `onClick` instead of `onFocus` (useful for toggling on/off).

<Preview>
  <Story name="Render Props">
    <Popover render={<div className="p--sm">I am a Popover!</div>}>
      {({ ref, onFocus, onBlur }) => (<RefButton ref={ref} onClick={onFocus} onBlur={onBlur}>Custom trigger</RefButton>)}
    </Popover>
  </Story>
</Preview>

## With Tabbable Content
This is the function child implementation if you want more control over what triggers the popover. The function returns a `value` that has a `ref` and methods `onFocus` and `onBlur` that will need to be attached to your desired element. This is also useful if you wish to trigger the focus using a different event, such as `onClick` instead of `onFocus` (useful for toggling on/off).

<Preview>
  <Story name="TabbableContent">
    <Popover render={
      <div className="p--sm">
        <Button>Test</Button>
        <Button>Test</Button>
        <Button>Test</Button>
        <Button>Test</Button>
      </div>
      }>
      {({ ref, onFocus, onBlur }) => (
        <RefButton ref={ref} onClick={onFocus} onBlur={onBlur}>
          Click me
        </RefButton>
      )}
    </Popover>
  </Story>
</Preview>

## Alignment
Pass a value to the `align` prop and you'll see the desired tooltip rendered. `Bottom` is the default value, so the prop can be omitted.

### Left
<Preview>
  <Story name="Align-Left">
    <Popover align="Left" render={<div className="p--sm">I am a Popover!</div>}>
      {(value) => (<RefButton {...value} >Align left</RefButton>)}
    </Popover>
  </Story>
</Preview>

### Right
<Preview>
  <Story name="Align-Right">
    <Popover align="Right" render={<div className="p--sm">I am a Popover!</div>}>
      {(value) => (<RefButton {...value}>Align right</RefButton>)}
    </Popover>
  </Story>
</Preview>

### Top
<Preview>
  <Story name="Align-Top">
    <Popover align="Top" render={<div className="p--sm">I am a Popover!</div>}>
      {(value) => (<RefButton {...value}>Align top</RefButton>)}
    </Popover>
  </Story>
</Preview>

### Bottom
<Preview>
  <Story name="Align-Bottom">
    <Popover align="Bottom" render={<div className="p--sm">I am a Popover!</div>}>
      {(value) => (<RefButton {...value}>Align bottom</RefButton>)}
    </Popover>
  </Story>
</Preview>
